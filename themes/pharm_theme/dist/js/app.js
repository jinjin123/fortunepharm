"use strict";jQuery(document).ready(function(){var i=jQuery,n=i(window);i("#btn-open-all-nyu").bind("click",function(){i("#popup-all-nyu").addClass("active")}),i("#btn-close-all-nyu").bind("click",function(){i("#popup-all-nyu").removeClass("active")}),i(".main-menu-toggle, #btn-close-navigation").click(function(){i("#navigation, #global-topbar, #modalBackdrop").toggleClass("active")}),!(0<window.location.href.indexOf("/en"))&&0<window.location.href.indexOf("/zh-hans")?i("ul.links > li.zh-hans").css("display","none"):i("ul.links > li.en").css("display","none"),i("#topbar-search-toggle").bind("click",function(){i("#topbar-search-form .form-text").hasClass("active")&&0<i("#topbar-search-form .form-text").val().length?(i("#topbar-search-form #search-block-form").submit(),i(window).width()<=400?(i(".topbar-search .topbar-search-form").css({right:"-78px"}),i(".topbar-logo").hide()):i(".topbar-search .topbar-search-form").css({right:"12px"})):(i(window).width()<=400?(i(".topbar-search .topbar-search-form").css({right:"-78px"}),i(".topbar-logo").hide()):i(".topbar-search .topbar-search-form").css({right:"12px"}),i("#topbar-search-form .form-text").addClass("active").focus())}),i("#topbar-search-form .form-text").bind("blur",function(){var e=i(this);setTimeout(function(){e.removeClass("active").text(""),i(".topbar-search .topbar-search-form").css({right:"0"}),i(".topbar-logo").show()},100)}),function(){i(".navigation .main-menu >li.root ul").each(function(){i(this).addClass("sub-menu"),i(this).find("ul").addClass("nested sub-menu")}),i(".navigation .main-menu >li").each(function(){i(this).find(">.is-active")&&(i(this).find(">.is-active").parent().addClass("opened"),i(this).find(">.is-active").parent().find("> ul").show())}),i(".navigation .main-menu >li .sub-menu > li").each(function(){i(this).find(">.is-active")&&(i(this).find(">.is-active").parent(".root").addClass("opened"),i(this).find(">.is-active").parent(".root").find("> .nested").show(),i(this).find(">.is-active").parent().parent().show(),i(this).find(">.is-active").parent().parent().parent().addClass("opened"),i(this).find(">.is-active").parent().parent().addClass("opened"))}),i(".navigation .main-menu >li .nested > li").each(function(){i(this).find(">.is-active")&&(i(this).find(">.is-active").parents().show(),i(this).find(">.is-active").parents().addClass("opened"))});var s=i(".header .main-nav-menu"),a=i(".main-menu-toggle");i(".navigation .main-menu li").on("click",function(e){i(this).hasClass("opened")?(i(this).removeClass("opened"),i(this).addClass("closed")):i(this).addClass("opened"),i(this).children("ul").toggle(),i(this).children("ul").toggleClass("opened"),e.stopPropagation()}),i("#block-nyu-theme-mainnavigation .main-menu li").on("click",function(e){i(this).hasClass("opened")?(i(this).removeClass("opened minus"),i(this).addClass("closed")):(i(this).removeClass("closed"),i(this).addClass("opened minus")),i(this).children("ul").toggle(),i(this).children("ul").toggleClass("opened"),e.stopPropagation()}),a.on("click",function(){var e=i(this);e.hasClass("opened")?(a.removeClass("opened").addClass("closed"),s.fadeOut(300)):(e.removeClass("closed").addClass("opened"),s.fadeIn(300))}),n.on("resize",function(){800<=n.width()&&a.hasClass("closed")&&s.css("display","flex"),n.width()<800&&"flex"===s.css("display")&&a.addClass("closed")&&s.css("display","none")})}();var s,a,o=i(".header #search"),t=i(".header .top-nav-search-icon"),c=i(".header #block-searchform #edit-keys"),l=i(".header #block-searchform #edit-submit"),d=document.querySelector(".header #block-searchform #edit-keys");!function(){t.on("click",function(){var e;n.width()<=600?window.location.href="/search/node":(e=i(this)).hasClass("opened")?(c.val()&&0!==c.val().length&&l.trigger("click"),o.fadeOut("fast"),e.removeClass("opened").addClass("closed")):(o.fadeIn("fast"),e.removeClass("closed").addClass("opened"))});o.on("input",function(e){try{d&&(d.value=o.val())}catch(e){console.log(e),window.location.href="/search/node?keys="+o.val()}}).on("focus",function(e){0}).on("blur",function(e){0}).keyup(function(e){13===e.which&&c.val()&&0!==c.val().length&&l.trigger("click")}),i(document.body).on("click",function(e){var s=i(e.target);s.is(".top-nav-search-icon")||s.is(o)||(o.fadeOut("fast"),t.removeClass("opened").addClass("closed"))})}(),a=".collapse-box .collapse-content",i(s=".collapse-box .collapse-title").click(function(){var e=i(this).siblings(a);0==e.is(":visible")?(e.animate({height:"show",opacity:"show"},500,function(){e.show()}),i(this).addClass("active"),i(this).closest(".field-item").siblings(".field-item").find(s).siblings(a).each(function(){var e=i(this),s=e.prev();e.animate({height:"hide",opacity:"hide"},500,function(){e.hide()}),s.removeClass("active")})):(e.animate({height:"hide",opacity:"hide"},500,function(){e.hide()}),i(this).removeClass("active"))})});